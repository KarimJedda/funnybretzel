<!doctype html>
<meta charset="utf-8">
<link rel="stylesheet" href="../../static/style.css">
<link href='https://fonts.googleapis.com/css?family=Roboto+Mono:400,700' rel='stylesheet' type='text/css'>
<title>FunnyBretzel ˵✖‿✖˵</title>
<body>
  <header>
    <div class="ga-script">
<div id="ga-script"></div>
<script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-45228626-2', 'auto');
        ga('send', 'pageview');
</script>
</div>
    <p class="contentlist"><a href="/" target="_self">FunnyBretzel</a></p>
    <nav>
      <ul class="navbar">
        <li><a href="../../">Welcome</a></li>
        
          <li class="active"><a href="../../blog/">Blog</a></li>
        
          <li><a href="../../projects/">Projects</a></li>
        
          <li><a href="../../courses/">Courses</a></li>
        
          <li><a href="../../books/">Books</a></li>
        
          <li><a href="../../about/">About</a></li>
        
      </ul>
    </nav>
  </header>
  <main>
    
  
  <article>
	  
	    <h1>Datamining the next series to watch - part 1</h1>
	  

	  <div>I tried to kind of automate the process of deciding which movie or series to watch next and I ended up writing this instead.<hr><br></div><h2>Lots of stuff out there</h2><div><div>Winter came and is still coming hard here in Germany and to fight the daily boredom and the long nights, what better than some 13 Seasons 50 minutes episodes series? (¬‿¬)</div><div><br></div>One thing though, it's ultra boring to find which one of those bazillion series to watch. There are reviews, recommendations, pseudo random generators and even gurus you can call that tell you what to do.&nbsp;<br></div><p>I tried to go the reviews &amp; recommendation way but in the end, if I don't like the series, it didn't matter if some guy on a remote island commented "cool series fam 10/10 would recommend". So there goes half a week jerking around to find out what to watch.&nbsp;</p><p><br></p><h2>So what's the dealy yo?</h2><p>After several unsuccessful hours looking for what I would waste thousands of hours of my life on, I decided&nbsp;to watch nothing and went out to discover the world, travel and take pilates hiking courses while eating vegan food.</p><p>Just kidding, I found another way.<br></p><p><br></p><h2>What makes a good series?</h2><div><div>When you watch a series you actually hear stuff and see stuff and sometimes read stuff when you didn't take that language class <span>back in the days.&nbsp;</span></div><div><ul><li><span>Watching stuff means that I can analyze video, images: cool story bro, I just have a&nbsp;Pentium 2 512Mb ram machine which means I can't&nbsp;unleash deep learning mayhem on&nbsp;1080p videos&nbsp;</span><br></li><li><span>Hearing stuff means that I can analyze audio: sure, will do, but audio libraries are a pita to use, i'm on it though</span><br></li><li>Reading stuff: Bingo! <b>NLP textual analysis LDA Semantic High Learning Deep Learning In between learning</b> (buzzwords for some google juice),&nbsp;so yeah, I went the subtitle way to stay the closest possible to the content I am analyzing, and as far as possible from some subjective representation of it</li></ul></div>Sweet, let's go for the subtitles. A subtitle is a file that looks like it's numbers, timestamps and some text on it (almost like a parking ticket). It presents itself like this (from Southpark):<br><br><img src="http://i.imgur.com/JlZmld5.png"><br>As you can see, it contains information about the duration of somebody talking, when they talk and also what they say. This simple text file has so much data it would make any advertising company (aka social network) so happy! I wish there was something like it but in real life, so you can listen to people while listening to some Kanye West or some Drake.<br><br><br><h2>Planning mayhem</h2><div>For starters, here's a "slaughter plan" like the Germans call it:</div><div><ul><li><span>DONE Find the data&nbsp;</span><br></li><li><span>DONE&nbsp;Get the data</span><br></li><li><span>DONE&nbsp;Clean the data</span><br></li><li><span>DONE&nbsp;Preprocess the data</span><br></li><li><span>DONE&nbsp;Store the data</span><br></li><li><span>DONE&nbsp;Query the data</span><br></li><li><span>DONE&nbsp;Define what I want from the data</span><br></li><li><span>DONE&nbsp;Do some stuff with the data</span></li></ul><div><i>Notice the EMACS org mode goodness going on.</i></div></div><div>It's always useful to plan steps at the higher level, it's the only way you'll achieve something.&nbsp;</div><h2>Executing the master plan</h2></div><p>Let me save you some time here and tell you that there are a million sources for subtitles online but the best ones are:</p><p><ul><li><a href="http://fr.tvsubtitles.net/">TV Subtitles</a><br></li><li><a href="http://www.opensubtitles.org/fr">OpenSubtitles</a><br></li></ul><div>The second one is the most entertaining one since they no scope any ad blocker out there to display ads so that you can meet sensational Russian women. ʕ•ᴥ•ʔ</div><div><br></div><div>So ok, which series should I choose?</div><div><br></div><div>Just like any IT nerd, I went on reddit and I asked for help. Let's start with the best of breed and ask:&nbsp;<a href="https://www.reddit.com/r/television/comments/3px8wa/worst_tv_series_of_all_time/">what are the worst tv series according to you?</a>&nbsp;</div><div>I got a lot of comments on that one, which already shows that it's also a tough choice to decide which series NOT to watch. Oh boy.</div><div><br></div><h2>Data Dictatorship</h2><div>I had to decide, so I've decided I'll get the subtitles for Bones, Breaking Bad, Criminal Minds, Dexter, Game of Thrones, House MD, House of Cards, How I met your mother, Louie, Mr. Robot, Sex and the City, Southpark, Suits, The Big Bang Theory, The Vampire Diaries and The Walking Dead. (I promise I'll do Star Trek too, in a second sprint)</div><div>This small sample was to try and find out how those series are structured, and this is what I'll be showing in part 1 of this little data exploration.</div><div><br></div><h2>Booting up Eclipse</h2><div>I had to start somewhere so I obviously decided I'll install java. Joke aside, here's some code that'll get you the subtitles for a series for just one website. The imports are not so difficult to figure out. You go ahead and code the rest young padawan!</div></p><pre><span>def </span><span>get_subtitle</span>(series_name<span>, </span>series_id<span>, </span>seasons):<br>    <span>for </span>i <span>in </span><span>xrange</span>(seasons):<br>        season = <span>str</span>(i + <span>1</span>)<br>        download_link = <span>'http://fr.tvsubtitles.net/download-' </span>+ series_id + <span>'-' </span>+ season + <span>'-en.html'<br></span><span>        </span>r = requests.get(download_link)<br>        z = zipfile.ZipFile(StringIO.StringIO(r.content))<br>        directory = series_name + <span>'/Season ' </span>+ season<br>        <span>if not </span>os.path.exists(directory):<br>            os.makedirs(directory)<br>        z.extractall(<span>path</span>=directory)</pre><p><div>I got the data, but data from the internet is as dangerous as unprotected sex. So I had to be cautious and check for stuff like encoding, formatting, extensions, file (☞ﾟ∀ﾟ)☞&nbsp;size, language and stuff like that.</div><div>But that is part of the data cleaning process which is boring and which NOBODY EVER tells you about in school. You always get that sequoia quechua plant data set which I call a unicorn dataset. You will never get any other dataset that is so clean from the interwebz.&nbsp;</div><div><br></div><div>So, several HOURS of frustration later, we did it guys. The data is clean and ready to be analyyyyyzed.&nbsp;</div><div><br></div><div><img src="http://i.imgur.com/YZ47tEa.png"></div><div><br></div><div><br></div><h2>Cool bro, now what?</h2><div>Let's define the goals of the analysis. This step requires that you already looked at the data and also that you have 2 neurons dedicated to creativity and open-mindedness.&nbsp;</div><div>I don't half-ass my work so here are the features I define as important:</div></p><div><span><span>•&nbsp;</span></span><span>Talk
time: How much talk is there in a series?</span></div><div>





<!--StartFragment-->



<div><span><span>•&nbsp;</span></span><span>Talk
</span><span>frequency: How frequently do they talk and when?</span></div><div><span><span>•&nbsp;</span></span><span>Episode/Movie
</span><span>duration: How long was the thing?</span></div><div><span><span>•&nbsp;</span></span><span>Idle</span><span>
time: Slideshow time (only pictures on screen)</span></div><div><span><span>•&nbsp;</span></span><span>Number</span><span>
</span><span>of</span><span>
</span><span>words</span></div><div><span><span>•&nbsp;</span></span><span>Number</span><span>
</span><span>of</span><span>
</span><span>sentences</span></div><div><span><span>•&nbsp;</span></span><span>Most
</span><span>used</span><span>
</span><span>words</span></div><div><span><span>•&nbsp;</span></span><span>Words
</span><span>length</span></div><div><span><span>•&nbsp;</span></span><span>Sentence</span><span>
</span><span>length</span></div><div>





<!--StartFragment-->

<div><span><span>•&nbsp;</span></span><span>Vocabulary</span><span>
</span><span>richness: How much $$ the vocabulary owns</span></div><div><span><span>•&nbsp;</span></span><span>Time
</span><span>to</span><span>
</span><span>read: How long would it take you to read the subs?</span></div><div><span><span>•&nbsp;</span></span><span>SMOG
grade: How old do you have to be to understand it?</span></div><div><span><span>•&nbsp;</span></span><span>Topic
</span><span>modeling: What are the topics?</span></div><div><span><span>•&nbsp;</span></span><span>Summary: Ain't nobody got time for that</span></div><div><span><span>•&nbsp;</span></span><span>Polarity: Doesn't involve bears</span></div><div><span><span>•&nbsp;</span></span><span>Word
</span><span>usage: How are the words used?</span></div><div><span><span>•&nbsp;</span></span><span>Sentence</span><span>
</span><span>beginnings: How are the sentence structured?</span></div><div><span><br></span></div><div><span>In order to do all of this stuff, I headed over to the awesome Python community and I was staggered that there is so much GOOD OL Stuff out there that the dataset is just begging for it to be analyzed.</span></div><div><span><br></span></div><div><span>Here's a short recap of all the libraries involved in the project:</span></div><div>





<!--StartFragment-->

<div><span><span>•&nbsp;</span></span><span>Python </span><span>has</span><span>
</span><span>libraries</span><span>,
lots </span><span>of</span><span>
</span><span>them</span><span>,
</span><span>using</span><span>
Python 2.7 (problem?)</span></div><div><span><span>•&nbsp;</span></span><span>Parse </span><span>subtitles</span><span>:
</span><u><span>pysrt</span></u></div><div><span><span>•&nbsp;</span></span><span>Parse </span><span>text</span><span>: </span><u><span>textblob</span></u><span>,
</span><u><span>sumy</span></u><span>
(</span><span>text</span><span>
</span><span>summarizer</span><span>),
</span><u><span>re</span></u></div><div><span><span>•&nbsp;</span></span><span>Analyze</span><span> </span><span>text</span><span>:
</span><u><span>gensim</span></u><span>
(</span><span>topic</span><span>
</span><span>modelling</span><span>),
</span><u><span>spacy</span></u><span>
(</span><span>kick ass</span><span>
</span><span>nltk</span><span>),
</span><u><span>readability</span></u><span>
</span><span>etc</span></div><div><span><span>•&nbsp;</span></span><span>Various</span><span> </span><span>data</span><span>
</span><span>manipulation</span><span>:
</span><u><span>pandas</span></u><span>,
</span><u><span>numpy</span></u><u><span> </span></u></div><div><span><span>•&nbsp;</span></span><span>Display </span><span>and</span><span>
</span><span>plots</span><span>:
</span><u><span>Wordcloud</span></u><span>,
</span><u><span>matplotlib</span></u></div><p>•&nbsp;<span>Download:
</span><u><span>requests</span></u><span>,
</span><u><span>BeautifulSoup</span></u><span>,
</span><u><span>zipfile</span></u><!--EndFragment-->&nbsp; &nbsp;&nbsp;<span><br></span></p>
<p><div>Don't worry, this will be available on my Github repo I guess someday, but it's the most hackathon code you'll ever have the privilege to load on your V8 engine.&nbsp;</div><div><br></div><h2>Enough chit chat, the results please<span>&nbsp;</span></h2><div>My friends know, I like to talk a lot when I feel good, and right now, I feel (ﾉ◕ヮ◕)ﾉ*:･ﾟ✧&nbsp;<span>delighted</span><span>&nbsp;✧ﾟ･: *ヽ(◕ヮ◕ヽ).&nbsp;</span></div><div><span>Ok, so I tested on that series called DEXTER, I bet you know it right?&nbsp;</span></div><div><br></div><div>So here's how it looks:</div><div><br></div><img src="http://i.imgur.com/4FOkGUp.png"></p><p>The average talk time for a Dexter episode is 30 minutes, and the average duration of an episode is 50 minutes. The talk density, defined by 30/50 is 0.6, which means 60% of the series is talking. You can notice that the talk time goes up the more we advance in the intrigue. But not by much, I'm still digging into the data but I'm sure this is due to the fact that they repeat a lot of stuff from the previous episode.&nbsp;</p><p>Next series! Sex and the City.&nbsp;</p><p>Ok so I don't like this series at all, and you'll know exactly why in the second part of the article. In the meantime, here is the time distribution:</p><p><img src="http://i.imgur.com/sSIJmGM.png"></p><p>The average talk time is 15 minutes and the episode duration is around 25 minutes. The talk density for this one is 15/25, which gives us 60% too! So, Sex and the City shows us that size doesn't matter, since it has the same density as Dexter, and both series have some arguable success for different demographics.&nbsp;</p><p>Let's mess with everyone's favorite now: Game of Thrones.&nbsp;</p><p><img src="http://i.imgur.com/qMGEfS5.png"></p><p>Nice curves! Notice how one is going down and the other is going up. I think there was something sketchy that came with the subtitles at episode 0 of Season 5. They started counting in Python! Yay!</p><p>Sweet, we have some preliminary results and the program works well. But this is just the tip of the ice cream cone.</p><blockquote>Let's dig deeper!&nbsp;</blockquote><p>Let's see how that looks like with movies. I picked out the top 10 4chan movies, and here are the results:</p><p><img src="http://i.imgur.com/8fcGoVu.png"></p><p>One thing we can derive from the above stuff is: It really doesn't matter if there is a lot of talk (Pulp Fiction, Fight Club..) or almost none (Space Odyssey, Lord of the Rings, Blade Runner..), there is a lot more to a good series/movie than just the words.&nbsp;</p><blockquote>Deeper!</blockquote><div><br>Let's look at the Star Wars episodes. The times differ with the ones you'll find online because I don't take into account the credits and other stuff.<br><img src="http://i.imgur.com/EcOAoTn.png"><br>It's cool to know that even if the duration stays roughly the same, the talk time <a href="https://www.youtube.com/watch?v=9APAHhIPhJE">goes down! DOWN! DOWN!</a>. There are lots of stuff that can go into explaining this behavior. I like to think that during the last decade, our visual cortex grew bigger while other stuff got compressed. This means, now more than ever, that we are visual creatures.<br>PS: I didn't like the last Episode that much.&nbsp;<br></div><p>If you're still reading, here's a potato for your patience.&nbsp;</p><p><img src="http://themetapicture.com/media/funny-Almirant-Ackbar-potato-trap.jpg"></p><blockquote>It goes deeper</blockquote><p>Up to now, it was some minor stuff. Now it gets interesting. What if, instead of watching the stuff, we only read the subtitles? How much life-hours would we waste instead of helping the other countries or advancing research?</p><p>So here it is.&nbsp;</p><blockquote>Useless knowledge: The average person reads 250 words per minute, which means you already wasted 7 minutes.<br></blockquote><p><img src="http://i.imgur.com/sf8a5cS.png"></p><p>In order to calculate these values, I took ALL the subtitles possible for a given format. Mr Robot has only 1 season for example.</p><p>This doesn't speak for itself so let's put it into context like Steve Jobs. A good example would be to see how thick a subtitles book would be. Here for some Maths:</p><p><img src="http://i.imgur.com/NegtkhW.png"></p><p>Two things before we continue, I don't use INCHES and my multiplications and additions are commutative. Not like that one dude explaining how (°ロ°)☝&nbsp;3 + 3 + 3 + 3 + 3 is not the same as 5 + 5 + 5 lol.</p><p>So here you got it, If you took the whole Game of Thrones series, printed out the subtitles, and sold it as a book, it won't be thicker than 4 stacked Playboy magazines (<a href="https://answers.yahoo.com/question/index?qid=20120126205024AAqBXtv">this dude was kind enough to measure the thickness</a>)</p><p><img src="http://i.imgur.com/T6BvA3I.png"></p><p>Each red line represents a full pocket sized book by the way, you can meditate on the other things on your free time.</p><blockquote>DEEEPAAAAAHH</blockquote><p>Sweet, now that we did some weird stuff, let's plot some eye candy and do some word clouds. Those clouds were generated with <a href="http://www.wordclouds.com/">an online javascript thingie</a>. Analyzing them is up to you but here you have, only for the first seasons:</p><p><img src="http://i.imgur.com/ZTnL7py.png"></p><p><img src="http://i.imgur.com/2FOsT0k.png"></p><p>aaaaaand&nbsp;༼ つ ◕_◕ ༽つ</p><p><img src="http://i.imgur.com/Az1Z2vL.jpg"></p><p>My writing as a therapy hits its end, I still have a lot I want to share but it's not yet formatted well so stay tuned if you want to know what makes a good series/movie. I found some characteristics using a mix of sound/video and text. If I'm too lazy just send me a message and we can talk code like ultra nerds.</p><p><br></p><p>I did some NLP stuff but it gets really complicated plotting it and showing in a user friendly way. My javascript skills go as far as console.log is required and don't even start me on React.</p><p>But here's a little preview for part 2 though, that will be available on this blag:</p><p><ul><li>Every point of view is unique, counting stars or just the simple fact of AVERAGING review counts or ratings is fundamentally flawed for series, even if your SVM's and KNN's go their way. This approach <b><u><i>works</i></u></b> for politics.&nbsp;ლ(´ڡ`ლ)<br></li><li>Them feels, not them bits&nbsp;</li><li>Closer to the content aka DEEPER!</li><li>Exploring hidden paths</li></ul><blockquote>Note: If you plan to aggressively<span>&nbsp;</span><span>throw the dataset into an RNN and generate a series or movie and record it, first of all you're awesome and second, I'd be glad to help you with the scenario and set up!&nbsp;</span></blockquote></p><p>Thanks for reading, you're awesome!&nbsp;</p><p></p>
  </article>

  <hr>
  <p class="meta" style="margin-top: 0px; margin-bottom: 0px;">
    written by
    
      <a href="https://twitter.com/@KarimJDDA">Karim Jedda</a>
    
    on 2016-02-29
  </p>
  <hr>
  <div class="comments">
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() { this.page.identifier = "/blog/datamining-the-next-series-to-watch-part-1"; };
  (function() {
    var d = document, s = d.createElement('script');
    s.src = '//funnybretzel.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript"
    rel="nofollow">comments powered by Disqus.</a>
</noscript>
</div>

  </main>
  <footer>
    Food is the best thing, always eat good stuff.
  </footer>
</body>
